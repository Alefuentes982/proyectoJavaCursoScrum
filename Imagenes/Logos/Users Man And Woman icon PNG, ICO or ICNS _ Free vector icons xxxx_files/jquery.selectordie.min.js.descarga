(function(a){a.fn.selectOrDie=function(i){var f={customID:null,customClass:"",placeholder:null,placeholderOption:false,prefix:null,cycle:false,stripEmpty:false,links:false,linksExternal:false,size:0,tabIndex:0,onChange:a.noop},e={},g=false,c,b;var h={initSoD:function(j){e=a.extend({},f,j);return this.each(function(){if(!a(this).parent().hasClass("iselect")){var A=a(this),u=A.data("custom-id")?A.data("custom-id"):e.customID,p=A.data("custom-class")?A.data("custom-class"):e.customClass,B=A.data("prefix")?A.data("prefix"):e.prefix,C=A.data("placeholder")?A.data("placeholder"):e.placeholder,D=A.data("placeholder-option")?A.data("placeholder-option"):e.placeholderOption,o=A.data("cycle")?A.data("cycle"):e.cycle,x=A.data("links")?A.data("links"):e.links,t=A.data("links-external")?A.data("links-external"):e.linksExternal,k=parseInt(A.data("size"))?A.data("size"):e.size,y=parseInt(A.data("tabindex"))?A.data("tabindex"):(e.tabIndex?e.tabIndex:(A.attr("tabindex")?A.attr("tabindex"):e.tabIndex)),w=A.data("strip-empty")?A.data("strip-empty"):e.stripEmpty,r=A.prop("title")?A.prop("title"):null,z=A.is(":disabled")?" disabled":"",q="",m="",l=0,v,n,s;if(B){q='<span class="iselect-prefix">'+B+"</span> "}if(C&&!B){m+='<span class="iselect-label iselect-placeholder">'+C+"</span>"}else{m+='<span class="iselect-label">'+q+"</span>"}v=a("<span/>",{id:u,"class":"iselect "+p+z,title:r,tabindex:y,html:m,"data-cycle":o,"data-links":x,"data-links-external":t,"data-placeholder":C,"data-placeholder-option":D,"data-prefix":B,"data-filter":""}).insertAfter(this);if(h.isTouch()){v.addClass("touch")}n=a("<span/>",{"class":"iselect-list-wrapper"}).appendTo(v);s=a("<span/>",{"class":"iselect-list"}).appendTo(n);a("option, optgroup",A).each(function(E){var F=a(this);if(w&&!a.trim(F.text())){F.remove()}else{if(E===0&&D&&!q){h.populateSoD(F,s,v,true)}else{h.populateSoD(F,s,v,false)}}});if(k){n.show();a(".iselect-option:lt("+k+")",s).each(function(){l+=a(this).outerHeight()});n.removeAttr("style");s.css({"max-height":l})}A.appendTo(v);v.on("focusin",h.focusSod).on("click",h.triggerSod).on("click",".iselect-option",h.optionClick).on("mousemove",".iselect-option",h.optionHover).on("keydown",h.keyboardUse);A.on("change",h.selectChange);a(document).on("click","label[for='"+A.attr("id")+"']",function(E){E.preventDefault();v.focus()})}else{console.log("Select or Die: It looks like the SoD already exists")}})},populateSoD:function(u,p,r,x){var t=r.data("placeholder"),n=r.data("placeholder-option"),k=r.data("prefix"),o=r.find(".iselect-label"),j=u.parent(),v=u.text(),s=u.val(),l=u.data("custom-id")?u.data("custom-id"):null,m=u.data("custom-class")?u.data("custom-class"):"",A=u.is(":disabled")?" disabled ":"",w=u.is(":selected")?" selected active ":"",q=u.data("link")?" link ":"",z=u.data("link-external")?" linkexternal":"",y=u.prop("label");if(u.is("option")){a("<span/>",{"class":"iselect-option "+m+A+w+q+z,id:l,title:v,html:v,"data-value":s}).appendTo(p);if(x&&!k){r.data("label",v);r.data("placeholder",v);u.prop("disabled",true);p.find(".iselect-option:last").addClass("is-placeholder disabled");if(w){o.addClass("iselect-placeholder")}}else{if(w&&t&&!n&&!k){r.data("label",t)}else{if(w){r.data("label",v)}}}if(w&&!t||w&&n||w&&k){o.append(v)}if(j.is("optgroup")){p.find(".iselect-option:last").addClass("groupchild");if(j.is(":disabled")){p.find(".iselect-option:last").addClass("disabled")}}}else{a("<span/>",{"class":"iselect-option optgroup "+A,title:y,html:y,"data-label":y}).appendTo(p)}},focusSod:function(){var j=a(this);if(!j.hasClass("disabled")){h.blurSod(a(".iselect.focus").not(j));j.addClass("focus");a("html").on("click.sodBlur",function(){h.blurSod(j)})}else{h.blurSod(j)}},triggerSod:function(n){n.stopPropagation();var l=a(this),k=l.find(".iselect-list"),o=l.data("placeholder"),m=l.find(".active"),j=l.find(".selected");if(!l.hasClass("disabled")&&!l.hasClass("open")&&!l.hasClass("touch")){l.addClass("open");if(o&&!l.data("prefix")){l.find(".iselect-label").addClass("iselect-placeholder").html(o)}h.listScroll(k,j);h.checkViewport(l,k)}else{clearTimeout(b);l.removeClass("open");if(o){l.find(".iselect-label").get(0).lastChild.nodeValue=m.text()}}},keyboardUse:function(q){var r=a(this),n=r.find(".iselect-list"),p=r.find(".iselect-option"),o=r.find(".iselect-label"),j=r.data("cycle"),l=p.filter(".active"),s,k,m;if(q.which>36&&q.which<41){if(q.which===37||q.which===38){k=l.prevAll(":not('.disabled, .optgroup')").first();m=p.not(".disabled, .optgroup").last()}else{if(q.which===39||q.which===40){k=l.nextAll(":not('.disabled, .optgroup')").first();m=p.not(".disabled, .optgroup").first()}}if(!k.hasClass("iselect-option")&&j){k=m}if(k.hasClass("iselect-option")||j){l.removeClass("active");k.addClass("active");o.get(0).lastChild.nodeValue=k.text();h.listScroll(n,k);if(!r.hasClass("open")){g=true}}return false}else{if(q.which===13||(q.which===32&&r.hasClass("open")&&(r.data("filter")[0]===" "||r.data("filter")===""))){q.preventDefault();l.click()}else{if(q.which===32&&!r.hasClass("open")&&(r.data("filter")[0]===" "||r.data("filter")==="")){q.preventDefault();g=false;r.click()}else{if(q.which===27){h.blurSod(r)}}}}if(q.which!==0){clearTimeout(c);r.data("filter",r.data("filter")+String.fromCharCode(q.which));s=p.filter(function(){return a(this).text().toLowerCase().indexOf(r.data("filter").toLowerCase())===0}).not(".disabled, .optgroup").first();if(s.length){l.removeClass("active");s.addClass("active");h.listScroll(n,s);o.get(0).lastChild.nodeValue=s.text();if(!r.hasClass("open")){g=true}}c=setTimeout(function(){r.data("filter","")},500)}},optionHover:function(){var j=a(this);if(!j.hasClass("disabled")&&!j.hasClass("optgroup")){j.siblings().removeClass("active").end().addClass("active")}},optionClick:function(o){o.stopPropagation();var m=a(this),n=m.closest(".iselect"),l=m.hasClass("disabled"),k=m.hasClass("optgroup"),j=n.find(".iselect-option:not('.optgroup')").index(this);if(n.hasClass("touch")){return}if(!l&&!k){n.find(".selected, .iselect-placeholder").removeClass("selected iselect-placeholder");m.addClass("selected");n.find("select option")[j].selected=true;n.find("select").change()}clearTimeout(b);n.removeClass("open")},selectChange:function(){var k=a(this),j=k.find(":selected"),m=j.text(),l=k.closest(".iselect");l.find(".iselect-label").get(0).lastChild.nodeValue=m;l.data("label",m);e.onChange.call(this);if((l.data("links")||j.data("link"))&&!j.data("link-external")){window.location.href=j.val()}else{if(l.data("links-external")||j.data("link-external")){window.open(j.val(),"_blank")}}},blurSod:function(l){if(a("body").find(l).length){var k=l.data("label"),n=l.data("placeholder"),m=l.find(".active"),j=l.find(".selected"),o=false;clearTimeout(b);if(g&&!m.hasClass("selected")){m.click();o=true}else{if(!m.hasClass("selected")){m.removeClass("active");j.addClass("active")}}if(!o&&n){l.find(".iselect-label").get(0).lastChild.nodeValue=j.text()}else{if(!o){l.find(".iselect-label").get(0).lastChild.nodeValue=k}}g=false;l.removeClass("open focus");l.blur();a("html").off(".sodBlur")}},checkViewport:function(m,l){var j=m[0].getBoundingClientRect(),k=l.outerHeight();if((j.bottom+k+10)>a(window).height()&&(j.top-k)>10){m.addClass("above")}else{m.removeClass("above")}b=setTimeout(function(){h.checkViewport(m,l)},200)},listScroll:function(j,l){var k=j[0].getBoundingClientRect(),m=l[0].getBoundingClientRect();if(k.top>m.top){j.scrollTop(j.scrollTop()-k.top+m.top)}else{if(k.bottom<m.bottom){j.scrollTop(j.scrollTop()-k.bottom+m.bottom)}}},isTouch:function(){return(("ontouchstart" in window)||(navigator.MaxTouchPoints>0)||(navigator.msMaxTouchPoints>0))}};var d={destroy:function(){return this.each(function(){var j=a(this),k=j.parent();if(k.hasClass("iselect")){j.off("change");k.find("span").remove();j.unwrap()}else{console.log("Select or Die: There's no SoD to destroy")}})},update:function(){return this.each(function(){var j=a(this),l=j.parent(),k=l.find(".iselect-list:first");if(l.hasClass("iselect")){k.empty();l.find(".iselect-label").get(0).lastChild.nodeValue="";if(j.is(":disabled")){l.addClass("disabled")}a("option, optgroup",j).each(function(){h.populateSoD(a(this),k,l)})}else{console.log("Select or Die: There's no SoD to update")}})},disable:function(j){return this.each(function(){var k=a(this),l=k.parent();if(l.hasClass("iselect")){if(typeof j!=="undefined"){l.find(".iselect-list:first .iselect-option[data-value='"+j+"']").addClass("disabled");l.find(".iselect-list:first .iselect-option[data-label='"+j+"']").nextUntil(":not(.groupchild)").addClass("disabled");a("option[value='"+j+"'], optgroup[label='"+j+"']",this).prop("disabled",true)}else{if(l.hasClass("iselect")){l.addClass("disabled");k.prop("disabled",true)}}}else{console.log("Select or Die: There's no SoD to disable")}})},enable:function(j){return this.each(function(){var k=a(this),l=k.parent();if(l.hasClass("iselect")){if(typeof j!=="undefined"){l.find(".iselect-list:first .iselect-option[data-value='"+j+"']").removeClass("disabled");l.find(".iselect-list:first .iselect-option[data-label='"+j+"']").nextUntil(":not(.groupchild)").removeClass("disabled");a("option[value='"+j+"'], optgroup[label='"+j+"']",this).prop("disabled",false)}else{if(l.hasClass("iselect")){l.removeClass("disabled");k.prop("disabled",false)}}}else{console.log("Select or Die: There's no SoD to enable")}})}};if(d[i]){return d[i].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof i==="object"||!i){return h.initSoD.apply(this,arguments)}else{a.error('Select or Die: Oh no! No such method "'+i+'" for the SoD instance')}}}})(jQuery);$(function(){if($('[data-toggle="iselect"]').length){$('[data-toggle="iselect"]').selectOrDie()}});